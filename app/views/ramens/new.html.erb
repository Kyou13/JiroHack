<h1>Ramens#new</h1>
<p>Find me in app/views/ramens/new.html.erb</p>

<%= form_for(@ramen, url: { action: 'create'}) do |f| %>
  <%= f.label :shop_name %>
  <%= f.text_field :shop_name %>
  <%= f.label :image_url %>
  <%= f.file_field :image_url %>
  <%= f.submit '作成' %>
<% end %>
<!--<input type="file" name="cameraFile" onchange="onChangeInput();">-->

<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
<%= javascript_tag do %>
  $(document).ready(init);
  var cameraImageLoader;
  function init() {
    if(!window.FileReader) {
      $("body").empty().append(
        $("<div />").append("file api not supported.")
      );
    return;
    }
    cameraImageLoader = new FileReader()
    cameraImageLoader.onload = function(event) {
      $("body").append(
        $("<img />").attr("src", cameraImageLoader.result)
      );
    };
  }

  function onChangeInput() {
    cameraImageLoader.readAsDataURL(
      document.forms[0].cameraFile.files[0]
    );
  }
<% end %>